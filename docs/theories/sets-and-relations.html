

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Theory Reference: Sets and Relations &mdash; cvc5  documentation</title>
  

  
  <link rel="stylesheet" href="../static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../static/tabs.css" type="text/css" />
  <link rel="stylesheet" href="../static/custom.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../static/documentation_options.js"></script>
        <script src="../static/jquery.js"></script>
        <script src="../static/underscore.js"></script>
        <script src="../static/doctools.js"></script>
        <script src="../static/tabs.js"></script>
    
    <script type="text/javascript" src="../static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="References" href="../references.html" />
    <link rel="prev" title="Theory Reference: Separation Logic" href="separation-logic.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> cvc5
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../binary/binary.html">Binary Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/api.html">API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../languages.html">Input Languages</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../theory.html">Theory References</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="datatypes.html">Theory Reference: Datatypes</a></li>
<li class="toctree-l2"><a class="reference internal" href="separation-logic.html">Theory Reference: Separation Logic</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Theory Reference: Sets and Relations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#finite-sets">Finite Sets</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#semantics">Semantics</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#finite-relations">Finite Relations</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../references.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../genindex.html">Index</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">cvc5</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../theory.html">Theory References</a> &raquo;</li>
        
      <li>Theory Reference: Sets and Relations</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="theory-reference-sets-and-relations">
<h1>Theory Reference: Sets and Relations<a class="headerlink" href="#theory-reference-sets-and-relations" title="Permalink to this headline">¶</a></h1>
<div class="section" id="finite-sets">
<h2>Finite Sets<a class="headerlink" href="#finite-sets" title="Permalink to this headline">¶</a></h2>
<p>cvc5 supports the theory of finite sets.
The simplest way to get a sense of the syntax is to look at an example:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-0-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-0-0-0" name="0-0" role="tab" tabindex="0">C++</button><button aria-controls="panel-0-0-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-1" name="0-1" role="tab" tabindex="-1">Python</button><button aria-controls="panel-0-0-2" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-2" name="0-2" role="tab" tabindex="-1">SMT-LIBv2</button></div><div aria-labelledby="tab-0-0-0" class="sphinx-tabs-panel" id="panel-0-0-0" name="0-0" role="tabpanel" tabindex="0"><div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="cm">/******************************************************************************</span>
<span class="linenos"> 2</span><span class="cm"> * Top contributors (to current version):</span>
<span class="linenos"> 3</span><span class="cm"> *   Aina Niemetz, Kshitij Bansal, Mudathir Mohamed</span>
<span class="linenos"> 4</span><span class="cm"> *</span>
<span class="linenos"> 5</span><span class="cm"> * This file is part of the cvc5 project.</span>
<span class="linenos"> 6</span><span class="cm"> *</span>
<span class="linenos"> 7</span><span class="cm"> * Copyright (c) 2009-2021 by the authors listed in the file AUTHORS</span>
<span class="linenos"> 8</span><span class="cm"> * in the top-level source directory and their institutional affiliations.</span>
<span class="linenos"> 9</span><span class="cm"> * All rights reserved.  See the file COPYING in the top-level source</span>
<span class="linenos">10</span><span class="cm"> * directory for licensing information.</span>
<span class="linenos">11</span><span class="cm"> * ****************************************************************************</span>
<span class="linenos">12</span><span class="cm"> *</span>
<span class="linenos">13</span><span class="cm"> * A simple demonstration of reasoning about sets with cvc5.</span>
<span class="linenos">14</span><span class="cm"> */</span>
<span class="linenos">15</span>
<span class="linenos">16</span><span class="cp">#include</span> <span class="cpf">&lt;cvc5/cvc5.h&gt;</span><span class="cp"></span>
<span class="linenos">17</span>
<span class="linenos">18</span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="linenos">19</span>
<span class="linenos">20</span><span class="k">using</span> <span class="k">namespace</span> <span class="nn">std</span><span class="p">;</span>
<span class="linenos">21</span><span class="k">using</span> <span class="k">namespace</span> <span class="nn">cvc5</span><span class="o">::</span><span class="nn">api</span><span class="p">;</span>
<span class="linenos">22</span>
<span class="linenos">23</span><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="linenos">24</span><span class="p">{</span>
<span class="linenos">25</span>  <span class="n">Solver</span> <span class="n">slv</span><span class="p">;</span>
<span class="linenos">26</span>
<span class="linenos">27</span>  <span class="c1">// Optionally, set the logic. We need at least UF for equality predicate,</span>
<span class="linenos">28</span>  <span class="c1">// integers (LIA) and sets (FS).</span>
<span class="linenos">29</span>  <span class="n">slv</span><span class="p">.</span><span class="n">setLogic</span><span class="p">(</span><span class="s">&quot;QF_UFLIAFS&quot;</span><span class="p">);</span>
<span class="linenos">30</span>
<span class="linenos">31</span>  <span class="c1">// Produce models</span>
<span class="linenos">32</span>  <span class="n">slv</span><span class="p">.</span><span class="n">setOption</span><span class="p">(</span><span class="s">&quot;produce-models&quot;</span><span class="p">,</span> <span class="s">&quot;true&quot;</span><span class="p">);</span>
<span class="linenos">33</span>  <span class="n">slv</span><span class="p">.</span><span class="n">setOption</span><span class="p">(</span><span class="s">&quot;output-language&quot;</span><span class="p">,</span> <span class="s">&quot;smt2&quot;</span><span class="p">);</span>
<span class="linenos">34</span>
<span class="linenos">35</span>  <span class="n">Sort</span> <span class="n">integer</span> <span class="o">=</span> <span class="n">slv</span><span class="p">.</span><span class="n">getIntegerSort</span><span class="p">();</span>
<span class="linenos">36</span>  <span class="n">Sort</span> <span class="n">set</span> <span class="o">=</span> <span class="n">slv</span><span class="p">.</span><span class="n">mkSetSort</span><span class="p">(</span><span class="n">integer</span><span class="p">);</span>
<span class="linenos">37</span>
<span class="linenos">38</span>  <span class="c1">// Verify union distributions over intersection</span>
<span class="linenos">39</span>  <span class="c1">// (A union B) intersection C = (A intersection C) union (B intersection C)</span>
<span class="linenos">40</span>  <span class="p">{</span>
<span class="linenos">41</span>    <span class="n">Term</span> <span class="n">A</span> <span class="o">=</span> <span class="n">slv</span><span class="p">.</span><span class="n">mkConst</span><span class="p">(</span><span class="n">set</span><span class="p">,</span> <span class="s">&quot;A&quot;</span><span class="p">);</span>
<span class="linenos">42</span>    <span class="n">Term</span> <span class="n">B</span> <span class="o">=</span> <span class="n">slv</span><span class="p">.</span><span class="n">mkConst</span><span class="p">(</span><span class="n">set</span><span class="p">,</span> <span class="s">&quot;B&quot;</span><span class="p">);</span>
<span class="linenos">43</span>    <span class="n">Term</span> <span class="n">C</span> <span class="o">=</span> <span class="n">slv</span><span class="p">.</span><span class="n">mkConst</span><span class="p">(</span><span class="n">set</span><span class="p">,</span> <span class="s">&quot;C&quot;</span><span class="p">);</span>
<span class="linenos">44</span>
<span class="linenos">45</span>    <span class="n">Term</span> <span class="n">unionAB</span> <span class="o">=</span> <span class="n">slv</span><span class="p">.</span><span class="n">mkTerm</span><span class="p">(</span><span class="n">UNION</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">);</span>
<span class="linenos">46</span>    <span class="n">Term</span> <span class="n">lhs</span> <span class="o">=</span> <span class="n">slv</span><span class="p">.</span><span class="n">mkTerm</span><span class="p">(</span><span class="n">INTERSECTION</span><span class="p">,</span> <span class="n">unionAB</span><span class="p">,</span> <span class="n">C</span><span class="p">);</span>
<span class="linenos">47</span>
<span class="linenos">48</span>    <span class="n">Term</span> <span class="n">intersectionAC</span> <span class="o">=</span> <span class="n">slv</span><span class="p">.</span><span class="n">mkTerm</span><span class="p">(</span><span class="n">INTERSECTION</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">C</span><span class="p">);</span>
<span class="linenos">49</span>    <span class="n">Term</span> <span class="n">intersectionBC</span> <span class="o">=</span> <span class="n">slv</span><span class="p">.</span><span class="n">mkTerm</span><span class="p">(</span><span class="n">INTERSECTION</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">);</span>
<span class="linenos">50</span>    <span class="n">Term</span> <span class="n">rhs</span> <span class="o">=</span> <span class="n">slv</span><span class="p">.</span><span class="n">mkTerm</span><span class="p">(</span><span class="n">UNION</span><span class="p">,</span> <span class="n">intersectionAC</span><span class="p">,</span> <span class="n">intersectionBC</span><span class="p">);</span>
<span class="linenos">51</span>
<span class="linenos">52</span>    <span class="n">Term</span> <span class="n">theorem</span> <span class="o">=</span> <span class="n">slv</span><span class="p">.</span><span class="n">mkTerm</span><span class="p">(</span><span class="n">EQUAL</span><span class="p">,</span> <span class="n">lhs</span><span class="p">,</span> <span class="n">rhs</span><span class="p">);</span>
<span class="linenos">53</span>
<span class="linenos">54</span>    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;cvc5 reports: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">theorem</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; is &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">slv</span><span class="p">.</span><span class="n">checkEntailed</span><span class="p">(</span><span class="n">theorem</span><span class="p">)</span>
<span class="linenos">55</span>         <span class="o">&lt;&lt;</span> <span class="s">&quot;.&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="linenos">56</span>  <span class="p">}</span>
<span class="linenos">57</span>
<span class="linenos">58</span>  <span class="c1">// Verify emptset is a subset of any set</span>
<span class="linenos">59</span>  <span class="p">{</span>
<span class="linenos">60</span>    <span class="n">Term</span> <span class="n">A</span> <span class="o">=</span> <span class="n">slv</span><span class="p">.</span><span class="n">mkConst</span><span class="p">(</span><span class="n">set</span><span class="p">,</span> <span class="s">&quot;A&quot;</span><span class="p">);</span>
<span class="linenos">61</span>    <span class="n">Term</span> <span class="n">emptyset</span> <span class="o">=</span> <span class="n">slv</span><span class="p">.</span><span class="n">mkEmptySet</span><span class="p">(</span><span class="n">set</span><span class="p">);</span>
<span class="linenos">62</span>
<span class="linenos">63</span>    <span class="n">Term</span> <span class="n">theorem</span> <span class="o">=</span> <span class="n">slv</span><span class="p">.</span><span class="n">mkTerm</span><span class="p">(</span><span class="n">SUBSET</span><span class="p">,</span> <span class="n">emptyset</span><span class="p">,</span> <span class="n">A</span><span class="p">);</span>
<span class="linenos">64</span>
<span class="linenos">65</span>    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;cvc5 reports: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">theorem</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; is &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">slv</span><span class="p">.</span><span class="n">checkEntailed</span><span class="p">(</span><span class="n">theorem</span><span class="p">)</span>
<span class="linenos">66</span>         <span class="o">&lt;&lt;</span> <span class="s">&quot;.&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="linenos">67</span>  <span class="p">}</span>
<span class="linenos">68</span>
<span class="linenos">69</span>  <span class="c1">// Find me an element in {1, 2} intersection {2, 3}, if there is one.</span>
<span class="linenos">70</span>  <span class="p">{</span>
<span class="linenos">71</span>    <span class="n">Term</span> <span class="n">one</span> <span class="o">=</span> <span class="n">slv</span><span class="p">.</span><span class="n">mkInteger</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="linenos">72</span>    <span class="n">Term</span> <span class="n">two</span> <span class="o">=</span> <span class="n">slv</span><span class="p">.</span><span class="n">mkInteger</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="linenos">73</span>    <span class="n">Term</span> <span class="n">three</span> <span class="o">=</span> <span class="n">slv</span><span class="p">.</span><span class="n">mkInteger</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
<span class="linenos">74</span>
<span class="linenos">75</span>    <span class="n">Term</span> <span class="n">singleton_one</span> <span class="o">=</span> <span class="n">slv</span><span class="p">.</span><span class="n">mkTerm</span><span class="p">(</span><span class="n">SINGLETON</span><span class="p">,</span> <span class="n">one</span><span class="p">);</span>
<span class="linenos">76</span>    <span class="n">Term</span> <span class="n">singleton_two</span> <span class="o">=</span> <span class="n">slv</span><span class="p">.</span><span class="n">mkTerm</span><span class="p">(</span><span class="n">SINGLETON</span><span class="p">,</span> <span class="n">two</span><span class="p">);</span>
<span class="linenos">77</span>    <span class="n">Term</span> <span class="n">singleton_three</span> <span class="o">=</span> <span class="n">slv</span><span class="p">.</span><span class="n">mkTerm</span><span class="p">(</span><span class="n">SINGLETON</span><span class="p">,</span> <span class="n">three</span><span class="p">);</span>
<span class="linenos">78</span>    <span class="n">Term</span> <span class="n">one_two</span> <span class="o">=</span> <span class="n">slv</span><span class="p">.</span><span class="n">mkTerm</span><span class="p">(</span><span class="n">UNION</span><span class="p">,</span> <span class="n">singleton_one</span><span class="p">,</span> <span class="n">singleton_two</span><span class="p">);</span>
<span class="linenos">79</span>    <span class="n">Term</span> <span class="n">two_three</span> <span class="o">=</span> <span class="n">slv</span><span class="p">.</span><span class="n">mkTerm</span><span class="p">(</span><span class="n">UNION</span><span class="p">,</span> <span class="n">singleton_two</span><span class="p">,</span> <span class="n">singleton_three</span><span class="p">);</span>
<span class="linenos">80</span>    <span class="n">Term</span> <span class="n">intersection</span> <span class="o">=</span> <span class="n">slv</span><span class="p">.</span><span class="n">mkTerm</span><span class="p">(</span><span class="n">INTERSECTION</span><span class="p">,</span> <span class="n">one_two</span><span class="p">,</span> <span class="n">two_three</span><span class="p">);</span>
<span class="linenos">81</span>
<span class="linenos">82</span>    <span class="n">Term</span> <span class="n">x</span> <span class="o">=</span> <span class="n">slv</span><span class="p">.</span><span class="n">mkConst</span><span class="p">(</span><span class="n">integer</span><span class="p">,</span> <span class="s">&quot;x&quot;</span><span class="p">);</span>
<span class="linenos">83</span>
<span class="linenos">84</span>    <span class="n">Term</span> <span class="n">e</span> <span class="o">=</span> <span class="n">slv</span><span class="p">.</span><span class="n">mkTerm</span><span class="p">(</span><span class="n">MEMBER</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">intersection</span><span class="p">);</span>
<span class="linenos">85</span>
<span class="linenos">86</span>    <span class="n">Result</span> <span class="n">result</span> <span class="o">=</span> <span class="n">slv</span><span class="p">.</span><span class="n">checkSatAssuming</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
<span class="linenos">87</span>    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;cvc5 reports: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">e</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; is &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">result</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;.&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="linenos">88</span>
<span class="linenos">89</span>    <span class="k">if</span> <span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="n">isSat</span><span class="p">())</span>
<span class="linenos">90</span>    <span class="p">{</span>
<span class="linenos">91</span>      <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;For instance, &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">slv</span><span class="p">.</span><span class="n">getValue</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; is a member.&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="linenos">92</span>    <span class="p">}</span>
<span class="linenos">93</span>  <span class="p">}</span>
<span class="linenos">94</span><span class="p">}</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-0-1" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-1" name="0-1" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="ch">#!/usr/bin/env python</span>
<span class="linenos"> 2</span><span class="c1">###############################################################################</span>
<span class="linenos"> 3</span><span class="c1"># Top contributors (to current version):</span>
<span class="linenos"> 4</span><span class="c1">#   Makai Mann, Mudathir Mohamed, Aina Niemetz</span>
<span class="linenos"> 5</span><span class="c1">#</span>
<span class="linenos"> 6</span><span class="c1"># This file is part of the cvc5 project.</span>
<span class="linenos"> 7</span><span class="c1">#</span>
<span class="linenos"> 8</span><span class="c1"># Copyright (c) 2009-2021 by the authors listed in the file AUTHORS</span>
<span class="linenos"> 9</span><span class="c1"># in the top-level source directory and their institutional affiliations.</span>
<span class="linenos">10</span><span class="c1"># All rights reserved.  See the file COPYING in the top-level source</span>
<span class="linenos">11</span><span class="c1"># directory for licensing information.</span>
<span class="linenos">12</span><span class="c1"># #############################################################################</span>
<span class="linenos">13</span><span class="c1">#</span>
<span class="linenos">14</span><span class="c1"># A simple demonstration of the solving capabilities of the cvc5 sets solver</span>
<span class="linenos">15</span><span class="c1"># through the Python API. This is a direct translation of sets-new.cpp.</span>
<span class="linenos">16</span><span class="c1">##</span>
<span class="linenos">17</span>
<span class="linenos">18</span><span class="kn">import</span> <span class="nn">pycvc5</span>
<span class="linenos">19</span><span class="kn">from</span> <span class="nn">pycvc5</span> <span class="kn">import</span> <span class="n">kinds</span>
<span class="linenos">20</span>
<span class="linenos">21</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<span class="linenos">22</span>    <span class="n">slv</span> <span class="o">=</span> <span class="n">pycvc5</span><span class="o">.</span><span class="n">Solver</span><span class="p">()</span>
<span class="linenos">23</span>
<span class="linenos">24</span>    <span class="c1"># Optionally, set the logic. We need at least UF for equality predicate,</span>
<span class="linenos">25</span>    <span class="c1"># integers (LIA) and sets (FS).</span>
<span class="linenos">26</span>    <span class="n">slv</span><span class="o">.</span><span class="n">setLogic</span><span class="p">(</span><span class="s2">&quot;QF_UFLIAFS&quot;</span><span class="p">)</span>
<span class="linenos">27</span>
<span class="linenos">28</span>    <span class="c1"># Produce models</span>
<span class="linenos">29</span>    <span class="n">slv</span><span class="o">.</span><span class="n">setOption</span><span class="p">(</span><span class="s2">&quot;produce-models&quot;</span><span class="p">,</span> <span class="s2">&quot;true&quot;</span><span class="p">)</span>
<span class="linenos">30</span>    <span class="n">slv</span><span class="o">.</span><span class="n">setOption</span><span class="p">(</span><span class="s2">&quot;output-language&quot;</span><span class="p">,</span> <span class="s2">&quot;smt2&quot;</span><span class="p">)</span>
<span class="linenos">31</span>
<span class="linenos">32</span>    <span class="n">integer</span> <span class="o">=</span> <span class="n">slv</span><span class="o">.</span><span class="n">getIntegerSort</span><span class="p">()</span>
<span class="linenos">33</span>    <span class="n">set_</span> <span class="o">=</span> <span class="n">slv</span><span class="o">.</span><span class="n">mkSetSort</span><span class="p">(</span><span class="n">integer</span><span class="p">)</span>
<span class="linenos">34</span>
<span class="linenos">35</span>    <span class="c1"># Verify union distributions over intersection</span>
<span class="linenos">36</span>    <span class="c1"># (A union B) intersection C = (A intersection C) union (B intersection C)</span>
<span class="linenos">37</span>
<span class="linenos">38</span>    <span class="n">A</span> <span class="o">=</span> <span class="n">slv</span><span class="o">.</span><span class="n">mkConst</span><span class="p">(</span><span class="n">set_</span><span class="p">,</span> <span class="s2">&quot;A&quot;</span><span class="p">)</span>
<span class="linenos">39</span>    <span class="n">B</span> <span class="o">=</span> <span class="n">slv</span><span class="o">.</span><span class="n">mkConst</span><span class="p">(</span><span class="n">set_</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">)</span>
<span class="linenos">40</span>    <span class="n">C</span> <span class="o">=</span> <span class="n">slv</span><span class="o">.</span><span class="n">mkConst</span><span class="p">(</span><span class="n">set_</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">)</span>
<span class="linenos">41</span>
<span class="linenos">42</span>    <span class="n">unionAB</span> <span class="o">=</span> <span class="n">slv</span><span class="o">.</span><span class="n">mkTerm</span><span class="p">(</span><span class="n">kinds</span><span class="o">.</span><span class="n">Union</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">)</span>
<span class="linenos">43</span>    <span class="n">lhs</span> <span class="o">=</span> <span class="n">slv</span><span class="o">.</span><span class="n">mkTerm</span><span class="p">(</span><span class="n">kinds</span><span class="o">.</span><span class="n">Intersection</span><span class="p">,</span> <span class="n">unionAB</span><span class="p">,</span> <span class="n">C</span><span class="p">)</span>
<span class="linenos">44</span>
<span class="linenos">45</span>    <span class="n">intersectionAC</span> <span class="o">=</span> <span class="n">slv</span><span class="o">.</span><span class="n">mkTerm</span><span class="p">(</span><span class="n">kinds</span><span class="o">.</span><span class="n">Intersection</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">C</span><span class="p">)</span>
<span class="linenos">46</span>    <span class="n">intersectionBC</span> <span class="o">=</span> <span class="n">slv</span><span class="o">.</span><span class="n">mkTerm</span><span class="p">(</span><span class="n">kinds</span><span class="o">.</span><span class="n">Intersection</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">)</span>
<span class="linenos">47</span>    <span class="n">rhs</span> <span class="o">=</span> <span class="n">slv</span><span class="o">.</span><span class="n">mkTerm</span><span class="p">(</span><span class="n">kinds</span><span class="o">.</span><span class="n">Union</span><span class="p">,</span> <span class="n">intersectionAC</span><span class="p">,</span> <span class="n">intersectionBC</span><span class="p">)</span>
<span class="linenos">48</span>
<span class="linenos">49</span>    <span class="n">theorem</span> <span class="o">=</span> <span class="n">slv</span><span class="o">.</span><span class="n">mkTerm</span><span class="p">(</span><span class="n">kinds</span><span class="o">.</span><span class="n">Equal</span><span class="p">,</span> <span class="n">lhs</span><span class="p">,</span> <span class="n">rhs</span><span class="p">)</span>
<span class="linenos">50</span>
<span class="linenos">51</span>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;cvc5 reports: </span><span class="si">{}</span><span class="s2"> is </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">theorem</span><span class="p">,</span>
<span class="linenos">52</span>                                          <span class="n">slv</span><span class="o">.</span><span class="n">checkEntailed</span><span class="p">(</span><span class="n">theorem</span><span class="p">)))</span>
<span class="linenos">53</span>
<span class="linenos">54</span>    <span class="c1"># Verify emptset is a subset of any set</span>
<span class="linenos">55</span>
<span class="linenos">56</span>    <span class="n">A</span> <span class="o">=</span> <span class="n">slv</span><span class="o">.</span><span class="n">mkConst</span><span class="p">(</span><span class="n">set_</span><span class="p">,</span> <span class="s2">&quot;A&quot;</span><span class="p">)</span>
<span class="linenos">57</span>    <span class="n">emptyset</span> <span class="o">=</span> <span class="n">slv</span><span class="o">.</span><span class="n">mkEmptySet</span><span class="p">(</span><span class="n">set_</span><span class="p">)</span>
<span class="linenos">58</span>
<span class="linenos">59</span>    <span class="n">theorem</span> <span class="o">=</span> <span class="n">slv</span><span class="o">.</span><span class="n">mkTerm</span><span class="p">(</span><span class="n">kinds</span><span class="o">.</span><span class="n">Subset</span><span class="p">,</span> <span class="n">emptyset</span><span class="p">,</span> <span class="n">A</span><span class="p">)</span>
<span class="linenos">60</span>
<span class="linenos">61</span>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;cvc5 reports: </span><span class="si">{}</span><span class="s2"> is </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">theorem</span><span class="p">,</span>
<span class="linenos">62</span>                                          <span class="n">slv</span><span class="o">.</span><span class="n">checkEntailed</span><span class="p">(</span><span class="n">theorem</span><span class="p">)))</span>
<span class="linenos">63</span>
<span class="linenos">64</span>    <span class="c1"># Find me an element in 1, 2 intersection 2, 3, if there is one.</span>
<span class="linenos">65</span>
<span class="linenos">66</span>    <span class="n">one</span> <span class="o">=</span> <span class="n">slv</span><span class="o">.</span><span class="n">mkInteger</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="linenos">67</span>    <span class="n">two</span> <span class="o">=</span> <span class="n">slv</span><span class="o">.</span><span class="n">mkInteger</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="linenos">68</span>    <span class="n">three</span> <span class="o">=</span> <span class="n">slv</span><span class="o">.</span><span class="n">mkInteger</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="linenos">69</span>
<span class="linenos">70</span>    <span class="n">singleton_one</span> <span class="o">=</span> <span class="n">slv</span><span class="o">.</span><span class="n">mkTerm</span><span class="p">(</span><span class="n">kinds</span><span class="o">.</span><span class="n">Singleton</span><span class="p">,</span> <span class="n">one</span><span class="p">)</span>
<span class="linenos">71</span>    <span class="n">singleton_two</span> <span class="o">=</span> <span class="n">slv</span><span class="o">.</span><span class="n">mkTerm</span><span class="p">(</span><span class="n">kinds</span><span class="o">.</span><span class="n">Singleton</span><span class="p">,</span> <span class="n">two</span><span class="p">)</span>
<span class="linenos">72</span>    <span class="n">singleton_three</span> <span class="o">=</span> <span class="n">slv</span><span class="o">.</span><span class="n">mkTerm</span><span class="p">(</span><span class="n">kinds</span><span class="o">.</span><span class="n">Singleton</span><span class="p">,</span> <span class="n">three</span><span class="p">)</span>
<span class="linenos">73</span>    <span class="n">one_two</span> <span class="o">=</span> <span class="n">slv</span><span class="o">.</span><span class="n">mkTerm</span><span class="p">(</span><span class="n">kinds</span><span class="o">.</span><span class="n">Union</span><span class="p">,</span> <span class="n">singleton_one</span><span class="p">,</span> <span class="n">singleton_two</span><span class="p">)</span>
<span class="linenos">74</span>    <span class="n">two_three</span> <span class="o">=</span> <span class="n">slv</span><span class="o">.</span><span class="n">mkTerm</span><span class="p">(</span><span class="n">kinds</span><span class="o">.</span><span class="n">Union</span><span class="p">,</span> <span class="n">singleton_two</span><span class="p">,</span> <span class="n">singleton_three</span><span class="p">)</span>
<span class="linenos">75</span>    <span class="n">intersection</span> <span class="o">=</span> <span class="n">slv</span><span class="o">.</span><span class="n">mkTerm</span><span class="p">(</span><span class="n">kinds</span><span class="o">.</span><span class="n">Intersection</span><span class="p">,</span> <span class="n">one_two</span><span class="p">,</span> <span class="n">two_three</span><span class="p">)</span>
<span class="linenos">76</span>
<span class="linenos">77</span>    <span class="n">x</span> <span class="o">=</span> <span class="n">slv</span><span class="o">.</span><span class="n">mkConst</span><span class="p">(</span><span class="n">integer</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">)</span>
<span class="linenos">78</span>
<span class="linenos">79</span>    <span class="n">e</span> <span class="o">=</span> <span class="n">slv</span><span class="o">.</span><span class="n">mkTerm</span><span class="p">(</span><span class="n">kinds</span><span class="o">.</span><span class="n">Member</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">intersection</span><span class="p">)</span>
<span class="linenos">80</span>
<span class="linenos">81</span>    <span class="n">result</span> <span class="o">=</span> <span class="n">slv</span><span class="o">.</span><span class="n">checkSatAssuming</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="linenos">82</span>
<span class="linenos">83</span>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;cvc5 reports: </span><span class="si">{}</span><span class="s2"> is </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">result</span><span class="p">))</span>
<span class="linenos">84</span>
<span class="linenos">85</span>    <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
<span class="linenos">86</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;For instance, </span><span class="si">{}</span><span class="s2"> is a member&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">slv</span><span class="o">.</span><span class="n">getValue</span><span class="p">(</span><span class="n">x</span><span class="p">)))</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-0-2" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-2" name="0-2" role="tabpanel" tabindex="0"><div class="highlight-smtlib notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>(<span class="k">set-logic</span> QF_UFLIAFS)
<span class="linenos"> 2</span>(<span class="k">set-option</span> <span class="na">:produce-models</span> <span class="s">true</span>)
<span class="linenos"> 3</span>(<span class="k">set-option</span> <span class="na">:incremental</span> <span class="s">true</span>)
<span class="linenos"> 4</span>(<span class="k">declare-const</span> <span class="n">A</span> (<span class="na">Set</span> <span class="na">Int</span>))
<span class="linenos"> 5</span>(<span class="k">declare-const</span> <span class="n">B</span> (<span class="na">Set</span> <span class="na">Int</span>))
<span class="linenos"> 6</span>(<span class="k">declare-const</span> <span class="n">C</span> (<span class="na">Set</span> <span class="na">Int</span>))
<span class="linenos"> 7</span>(<span class="k">declare-const</span> <span class="n">x</span> <span class="na">Int</span>)
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="c">; Verify union distributions over intersection</span>
<span class="linenos">10</span>(<span class="k">check-sat-assuming</span>
<span class="linenos">11</span>  (
<span class="linenos">12</span>    (<span class="o">distinct</span>
<span class="linenos">13</span>      (<span class="o">intersection</span> (<span class="o">union</span> <span class="n">A</span> <span class="n">B</span>) <span class="n">C</span>)
<span class="linenos">14</span>      (<span class="o">union</span> (<span class="o">intersection</span> <span class="n">A</span> <span class="n">C</span>) (<span class="o">intersection</span> <span class="n">B</span> <span class="n">C</span>)))
<span class="linenos">15</span>  )
<span class="linenos">16</span>)
<span class="linenos">17</span>
<span class="linenos">18</span><span class="c">; Verify emptset is a subset of any set</span>
<span class="linenos">19</span>(<span class="k">check-sat-assuming</span>
<span class="linenos">20</span>  (
<span class="linenos">21</span>    (<span class="o">not</span> (<span class="o">subset</span> (<span class="na">as</span> <span class="o">emp</span><span class="n">tyset</span> (<span class="na">Set</span> <span class="na">Int</span>)) <span class="n">A</span>))
<span class="linenos">22</span>  )
<span class="linenos">23</span>)
<span class="linenos">24</span>
<span class="linenos">25</span><span class="c">; Find an element in {1, 2} intersection {2, 3}, if there is one.</span>
<span class="linenos">26</span>(<span class="k">check-sat-assuming</span>
<span class="linenos">27</span>  (
<span class="linenos">28</span>    (<span class="o">member</span>
<span class="linenos">29</span>      <span class="n">x</span>
<span class="linenos">30</span>      (<span class="o">intersection</span>
<span class="linenos">31</span>        (<span class="o">union</span> (<span class="o">singleton</span> <span class="m">1</span>) (<span class="o">singleton</span> <span class="m">2</span>))
<span class="linenos">32</span>        (<span class="o">union</span> (<span class="o">singleton</span> <span class="m">2</span>) (<span class="o">singleton</span> <span class="m">3</span>))))
<span class="linenos">33</span>  )
<span class="linenos">34</span>)
</pre></div>
</div>
</div></div>
<p>The source code of these examples is available at:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/cvc5/cvc5/blob/master/examples/api/smtlib/sets.smt2">SMT-LIB 2 language example</a></p></li>
<li><p><a class="reference external" href="https://github.com/cvc5/cvc5/blob/master/examples/api/cpp/sets.cpp">C++ API example</a></p></li>
<li><p><a class="reference external" href="https://github.com/cvc5/cvc5/blob/master/examples/api/python/sets.cpp">Python API example</a></p></li>
</ul>
<p>Below is a short summary of the sorts, constants, functions and
predicates.  More details can be found in <span id="id1">[<a class="reference internal" href="../references.html#id3">BBRT17</a>]</span>.</p>
<p>For the C++ API examples in the table below, we assume that we have created
a <cite>cvc5::api::Solver solver</cite> object.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 16%" />
<col style="width: 34%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td></td>
<td><p>SMTLIB language</p></td>
<td><p>C++ API</p></td>
</tr>
<tr class="row-even"><td><p>Logic String</p></td>
<td><p>append <cite>FS</cite> for finite sets</p>
<p><code class="docutils literal notranslate"><span class="pre">(set-logic</span> <span class="pre">QF_UFLIAFS)</span></code></p>
</td>
<td><p>append <cite>FS</cite> for finite sets</p>
<p><code class="docutils literal notranslate"><span class="pre">solver.setLogic(&quot;QF_UFLIAFS&quot;);</span></code></p>
</td>
</tr>
<tr class="row-odd"><td><p>Sort</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">(Set</span> <span class="pre">&lt;Sort&gt;)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">solver.mkSetSort(cvc5::api::Sort</span> <span class="pre">elementSort);</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Constants</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">(declare-const</span> <span class="pre">X</span> <span class="pre">(Set</span> <span class="pre">Int)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Sort</span> <span class="pre">s</span> <span class="pre">=</span> <span class="pre">solver.mkSetSort(solver.getIntegerSort());</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">Term</span> <span class="pre">X</span> <span class="pre">=</span> <span class="pre">solver.mkConst(s,</span> <span class="pre">&quot;X&quot;);</span></code></p>
</td>
</tr>
<tr class="row-odd"><td><p>Union</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">(union</span> <span class="pre">X</span> <span class="pre">Y)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Term</span> <span class="pre">Y</span> <span class="pre">=</span> <span class="pre">solver.mkConst(s,</span> <span class="pre">&quot;Y&quot;);</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">Term</span> <span class="pre">t</span> <span class="pre">=</span> <span class="pre">solver.mkTerm(Kind::UNION,</span> <span class="pre">X,</span> <span class="pre">Y);</span></code></p>
</td>
</tr>
<tr class="row-even"><td><p>Intersection</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">(setminus</span> <span class="pre">X</span> <span class="pre">Y)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Term</span> <span class="pre">t</span> <span class="pre">=</span> <span class="pre">solver.mkTerm(Kind::SETMINUS,</span> <span class="pre">X,</span> <span class="pre">Y);</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Membership</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">(member</span> <span class="pre">x</span> <span class="pre">X)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Term</span> <span class="pre">x</span> <span class="pre">=</span> <span class="pre">solver.mkConst(solver.getIntegerSort(),</span> <span class="pre">&quot;x&quot;);</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">Term</span> <span class="pre">t</span> <span class="pre">=</span> <span class="pre">solver.mkTerm(Kind::MEMBER,</span> <span class="pre">x,</span> <span class="pre">X);</span></code></p>
</td>
</tr>
<tr class="row-even"><td><p>Subset</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">(subset</span> <span class="pre">X</span> <span class="pre">Y)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Term</span> <span class="pre">t</span> <span class="pre">=</span> <span class="pre">solver.mkTerm(Kind::SUBSET,</span> <span class="pre">X,</span> <span class="pre">Y);</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Emptyset</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">(as</span> <span class="pre">emptyset</span> <span class="pre">(Set</span> <span class="pre">Int)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Term</span> <span class="pre">t</span> <span class="pre">=</span> <span class="pre">solver.mkEmptySet(s);</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Singleton Set</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">(singleton</span> <span class="pre">1)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Term</span> <span class="pre">t</span> <span class="pre">=</span> <span class="pre">solver.mkTerm(Kind::SINGLETON,</span> <span class="pre">solver.mkInteger(1));</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Cardinality</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">(card</span> <span class="pre">X)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Term</span> <span class="pre">t</span> <span class="pre">=</span> <span class="pre">solver.mkTerm(Kind::CARD,</span> <span class="pre">X);</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Insert / Finite Sets</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">(insert</span> <span class="pre">1</span> <span class="pre">2</span> <span class="pre">3</span> <span class="pre">(singleton</span> <span class="pre">4))</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Term</span> <span class="pre">one</span> <span class="pre">=</span> <span class="pre">solver.mkInteger(1);</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">Term</span> <span class="pre">two</span> <span class="pre">=</span> <span class="pre">solver.mkInteger(2);</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">Term</span> <span class="pre">three</span> <span class="pre">=</span> <span class="pre">solver.mkInteger(3);</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">Term</span> <span class="pre">sgl</span> <span class="pre">=</span> <span class="pre">solver.mkTerm(Kind::SINGLETON,</span> <span class="pre">solver.mkInteger(4));</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">Term</span> <span class="pre">t</span> <span class="pre">=</span> <span class="pre">solver.mkTerm(Kind::INSERT,</span> <span class="pre">{one,</span> <span class="pre">two,</span> <span class="pre">three,</span> <span class="pre">sgl});</span></code></p>
</td>
</tr>
<tr class="row-odd"><td><p>Complement</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">(complement</span> <span class="pre">X)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Term</span> <span class="pre">t</span> <span class="pre">=</span> <span class="pre">solver.mkTerm(Kind::COMPLEMENT,</span> <span class="pre">X);</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Universe Set</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">(as</span> <span class="pre">univset</span> <span class="pre">(Set</span> <span class="pre">Int))</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Term</span> <span class="pre">t</span> <span class="pre">=</span> <span class="pre">solver.mkUniverseSet(s);</span></code></p></td>
</tr>
</tbody>
</table>
<div class="section" id="semantics">
<h3>Semantics<a class="headerlink" href="#semantics" title="Permalink to this headline">¶</a></h3>
<p>The semantics of most of the above operators (e.g., set union, intersection,
difference) are straightforward.
The semantics for the universe set and complement are more subtle and explained
in the following.</p>
<p>The universe set <code class="docutils literal notranslate"><span class="pre">(as</span> <span class="pre">univset</span> <span class="pre">(Set</span> <span class="pre">T))</span></code> is <em>not</em> interpreted as the set
containing all elements of sort <code class="docutils literal notranslate"><span class="pre">T</span></code>.
Instead it may be interpreted as any set such that all sets of sort <code class="docutils literal notranslate"><span class="pre">(Set</span> <span class="pre">T)</span></code>
are interpreted as subsets of it.
In other words, it is the union of the interpretations of all (finite) sets in
our input.</p>
<p>For example:</p>
<div class="highlight-smtlib notranslate"><div class="highlight"><pre><span></span>(<span class="k">declare-fun</span> <span class="n">x</span> () (<span class="na">Set</span> <span class="na">Int</span>))
(<span class="k">declare-fun</span> <span class="n">y</span> () (<span class="na">Set</span> <span class="na">Int</span>))
(<span class="k">declare-fun</span> <span class="n">z</span> () (<span class="na">Set</span> <span class="na">Int</span>))
(<span class="k">assert</span> (<span class="o">member</span> <span class="m">0</span> <span class="n">x</span>))
(<span class="k">assert</span> (<span class="o">member</span> <span class="m">1</span> <span class="n">y</span>))
(<span class="k">assert</span> (<span class="o">=</span> <span class="n">z</span> (<span class="na">as</span> <span class="o">univset</span> (<span class="na">Set</span> <span class="na">Int</span>))))
(<span class="k">check-sat</span>)
</pre></div>
</div>
<p>Here, a possible model is:</p>
<div class="highlight-smtlib notranslate"><div class="highlight"><pre><span></span>(<span class="k">define-fun</span> <span class="n">x</span> () (<span class="o">singleton</span> <span class="m">0</span>))
(<span class="k">define-fun</span> <span class="n">y</span> () (<span class="o">singleton</span> <span class="m">1</span>))
(<span class="k">define-fun</span> <span class="n">z</span> () (<span class="o">union</span> (<span class="o">singleton</span> <span class="m">1</span>) (<span class="o">singleton</span> <span class="m">0</span>)))
</pre></div>
</div>
<p>Notice that the universe set in this example is interpreted the same as <code class="docutils literal notranslate"><span class="pre">z</span></code>,
and is such that all sets in this example (<code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span></code>, and <code class="docutils literal notranslate"><span class="pre">z</span></code>) are subsets
of it.</p>
<p>The set complement operator for <code class="docutils literal notranslate"><span class="pre">(Set</span> <span class="pre">T)</span></code> is interpreted relative to the
interpretation of the universe set for <code class="docutils literal notranslate"><span class="pre">(Set</span> <span class="pre">T)</span></code>, and not relative to the set
of all elements of sort <code class="docutils literal notranslate"><span class="pre">T</span></code>.
That is, for all sets <code class="docutils literal notranslate"><span class="pre">X</span></code> of sort <code class="docutils literal notranslate"><span class="pre">(Set</span> <span class="pre">T)</span></code>, the complement operator is
such that <code class="docutils literal notranslate"><span class="pre">(=</span> <span class="pre">(complement</span> <span class="pre">X)</span> <span class="pre">(setminus</span> <span class="pre">(as</span> <span class="pre">univset</span> <span class="pre">(Set</span> <span class="pre">T))</span> <span class="pre">X))</span></code>
holds in all models.</p>
<p>The motivation for these semantics is to ensure that the universe set for sort
<code class="docutils literal notranslate"><span class="pre">T</span></code> and applications of set complement can always be interpreted as a finite
set in (quantifier-free) inputs, even if the cardinality of <code class="docutils literal notranslate"><span class="pre">T</span></code> is infinite.
Above, notice that we were able to find a model for the universe set of sort
<code class="docutils literal notranslate"><span class="pre">(Set</span> <span class="pre">Int)</span></code> that contained two elements only.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In the presence of quantifiers, cvc5’s implementation of the above theory
allows infinite sets.
In particular, the following formula is SAT (even though cvc5 is not able to
say this):</p>
<div class="highlight-smtlib notranslate"><div class="highlight"><pre><span></span>(<span class="k">set-logic</span> ALL)
(<span class="k">declare-fun</span> <span class="n">x</span> () (<span class="na">Set</span> <span class="na">Int</span>))
(<span class="k">assert</span> (<span class="o">forall</span> ((<span class="n">z</span> <span class="na">Int</span>) (<span class="o">member</span> (<span class="o">*</span> <span class="m">2</span> <span class="n">z</span>) <span class="n">x</span>)))
(<span class="k">check-sat</span>)
</pre></div>
</div>
<p>The reason for that is that making this formula (and similar ones) <cite>unsat</cite> is
counter-intuitive when quantifiers are present.</p>
</div>
</div>
</div>
<div class="section" id="finite-relations">
<h2>Finite Relations<a class="headerlink" href="#finite-relations" title="Permalink to this headline">¶</a></h2>
<p>Example:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-1-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-1-1-0" name="1-0" role="tab" tabindex="0">SMT-LIBv2</button></div><div aria-labelledby="tab-1-1-0" class="sphinx-tabs-panel" id="panel-1-1-0" name="1-0" role="tabpanel" tabindex="0"><div class="highlight-smtlib notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>(<span class="k">set-logic</span> ALL)
<span class="linenos"> 2</span>(<span class="k">set-info</span> <span class="na">:status</span> <span class="n">sat</span>)
<span class="linenos"> 3</span>
<span class="linenos"> 4</span>(<span class="k">declare-fun</span> <span class="n">r1</span> () (<span class="na">Set</span> (<span class="na">Tuple</span> <span class="na">String</span> <span class="na">Int</span>)))
<span class="linenos"> 5</span>(<span class="k">declare-fun</span> <span class="n">r2</span> () (<span class="na">Set</span> (<span class="na">Tuple</span> <span class="na">Int</span> <span class="na">String</span>)))
<span class="linenos"> 6</span>(<span class="k">declare-fun</span> <span class="n">r</span> () (<span class="na">Set</span> (<span class="na">Tuple</span> <span class="na">String</span> <span class="na">String</span>)))
<span class="linenos"> 7</span>(<span class="k">declare-fun</span> <span class="n">s</span> () (<span class="na">Set</span> (<span class="na">Tuple</span> <span class="na">String</span> <span class="na">String</span>)))
<span class="linenos"> 8</span>(<span class="k">declare-fun</span> <span class="n">t</span> () (<span class="na">Set</span> (<span class="na">Tuple</span> <span class="na">String</span> <span class="na">Int</span> <span class="na">Int</span> <span class="na">String</span>)))
<span class="linenos"> 9</span>(<span class="k">declare-fun</span> <span class="n">lt1</span> () (<span class="na">Set</span> (<span class="na">Tuple</span> <span class="na">Int</span> <span class="na">Int</span>)))
<span class="linenos">10</span>(<span class="k">declare-fun</span> <span class="n">lt2</span> () (<span class="na">Set</span> (<span class="na">Tuple</span> <span class="na">Int</span> <span class="na">Int</span>)))
<span class="linenos">11</span>(<span class="k">declare-fun</span> <span class="n">i</span> () <span class="na">Int</span>)
<span class="linenos">12</span>
<span class="linenos">13</span>(<span class="k">assert</span>
<span class="linenos">14</span>  (<span class="o">=</span> <span class="n">r1</span>
<span class="linenos">15</span>    (<span class="o">insert</span>
<span class="linenos">16</span>      (<span class="o">mkTuple</span> <span class="s">&quot;a&quot;</span> <span class="m">1</span>)
<span class="linenos">17</span>      (<span class="o">mkTuple</span> <span class="s">&quot;b&quot;</span> <span class="m">2</span>)
<span class="linenos">18</span>      (<span class="o">mkTuple</span> <span class="s">&quot;c&quot;</span> <span class="m">3</span>)
<span class="linenos">19</span>      (<span class="o">singleton</span> (<span class="o">mkTuple</span> <span class="s">&quot;d&quot;</span> <span class="m">4</span>)))))
<span class="linenos">20</span>(<span class="k">assert</span>
<span class="linenos">21</span>  (<span class="o">=</span> <span class="n">r2</span>
<span class="linenos">22</span>    (<span class="o">insert</span>
<span class="linenos">23</span>      (<span class="o">mkTuple</span> <span class="m">1</span> <span class="s">&quot;1&quot;</span>)
<span class="linenos">24</span>      (<span class="o">mkTuple</span> <span class="m">2</span> <span class="s">&quot;2&quot;</span>)
<span class="linenos">25</span>      (<span class="o">mkTuple</span> <span class="m">3</span> <span class="s">&quot;3&quot;</span>)
<span class="linenos">26</span>      (<span class="o">singleton</span> (<span class="o">mkTuple</span> <span class="m">17</span> <span class="s">&quot;17&quot;</span>)))))
<span class="linenos">27</span>(<span class="k">assert</span> (<span class="o">=</span> <span class="n">r</span> (<span class="n">join</span> <span class="n">r1</span> <span class="n">r2</span>)))
<span class="linenos">28</span>(<span class="k">assert</span> (<span class="o">=</span> <span class="n">s</span> (<span class="o">transpose</span> <span class="n">r</span>)))
<span class="linenos">29</span>(<span class="k">assert</span> (<span class="o">=</span> <span class="n">t</span> (<span class="o">product</span> <span class="n">r1</span> <span class="n">r2</span>)))
<span class="linenos">30</span>(<span class="k">assert</span>
<span class="linenos">31</span>  (<span class="o">=</span>
<span class="linenos">32</span>    <span class="n">lt1</span>
<span class="linenos">33</span>     (<span class="o">insert</span>
<span class="linenos">34</span>       (<span class="o">mkTuple</span> <span class="m">1</span> <span class="m">2</span>)
<span class="linenos">35</span>       (<span class="o">mkTuple</span> <span class="m">2</span> <span class="m">3</span>)
<span class="linenos">36</span>       (<span class="o">mkTuple</span> <span class="m">3</span> <span class="m">4</span>)
<span class="linenos">37</span>       (<span class="o">singleton</span> (<span class="o">mkTuple</span> <span class="m">4</span> <span class="m">5</span>)))))
<span class="linenos">38</span>(<span class="k">assert</span> (<span class="o">=</span> <span class="n">lt2</span> (<span class="o">tclosure</span> <span class="n">lt1</span>)))
<span class="linenos">39</span>(<span class="k">assert</span> (<span class="o">=</span> <span class="n">i</span> (<span class="o">card</span> <span class="n">t</span>)))
<span class="linenos">40</span>
<span class="linenos">41</span>(<span class="k">check-sat</span>)
</pre></div>
</div>
</div></div>
<p>For reference, below is a short summary of the sorts, constants, functions and
predicates.
More details can be found in <span id="id2">[<a class="reference internal" href="../references.html#id4">MRTB17</a>]</span>.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 14%" />
<col style="width: 30%" />
<col style="width: 55%" />
</colgroup>
<tbody>
<tr class="row-odd"><td></td>
<td><p>SMTLIB language</p></td>
<td><p>C++ API</p></td>
</tr>
<tr class="row-even"><td><p>Logic String</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">(set-logic</span> <span class="pre">QF_ALL)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">solver.setLogic(&quot;QF_ALL&quot;);</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Tuple Sort</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">(Tuple</span> <span class="pre">&lt;Sort_1&gt;,</span> <span class="pre">...,</span> <span class="pre">&lt;Sort_n&gt;)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">std::vector&lt;cvc5::api::Sort&gt;</span> <span class="pre">sorts</span> <span class="pre">=</span> <span class="pre">{</span> <span class="pre">...</span> <span class="pre">};</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">Sort</span> <span class="pre">s</span> <span class="pre">=</span> <span class="pre">solver.mkTupleSort(sorts);</span></code></p>
</td>
</tr>
<tr class="row-even"><td></td>
<td><p><code class="docutils literal notranslate"><span class="pre">(declare-const</span> <span class="pre">t</span> <span class="pre">(Tuple</span> <span class="pre">Int</span> <span class="pre">Int))</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Sort</span> <span class="pre">s_int</span> <span class="pre">=</span> <span class="pre">solver.getIntegerSort();</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">Sort</span> <span class="pre">s</span> <span class="pre">=</span> <span class="pre">solver.mkTypleSort({s_int,</span> <span class="pre">s_int});</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">Term</span> <span class="pre">t</span> <span class="pre">=</span> <span class="pre">solver.mkConst(s,</span> <span class="pre">&quot;t&quot;);</span></code></p>
</td>
</tr>
<tr class="row-odd"><td><p>Tuple Constructor</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">(mkTuple</span> <span class="pre">&lt;Term_1&gt;,</span> <span class="pre">...,</span> <span class="pre">&lt;Term_n&gt;)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Sort</span> <span class="pre">s</span> <span class="pre">=</span> <span class="pre">solver.mkTypleSort(sorts);</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">Datatype</span> <span class="pre">dt</span> <span class="pre">=</span> <span class="pre">s.getDatatype();</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">Term</span> <span class="pre">c</span> <span class="pre">=</span> <span class="pre">dt[0].getConstructor();</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">Term</span> <span class="pre">t</span> <span class="pre">=</span> <span class="pre">solver.mkTerm(Kind::APPLY_CONSTRUCTOR,</span> <span class="pre">{c,</span> <span class="pre">&lt;Term_1&gt;,</span> <span class="pre">...,</span> <span class="pre">&lt;Term_n&gt;});</span></code></p>
</td>
</tr>
<tr class="row-even"><td><p>Tuple Selector</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">((_</span> <span class="pre">tupSel</span> <span class="pre">i)</span> <span class="pre">t)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Sort</span> <span class="pre">s</span> <span class="pre">=</span> <span class="pre">solver.mkTypleSort(sorts);</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">Datatype</span> <span class="pre">dt</span> <span class="pre">=</span> <span class="pre">s.getDatatype();</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">Term</span> <span class="pre">c</span> <span class="pre">=</span> <span class="pre">dt[0].getSelector();</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">Term</span> <span class="pre">t</span> <span class="pre">=</span> <span class="pre">solver.mkTerm(Kind::APPLY_SELECTOR,</span> <span class="pre">{s,</span> <span class="pre">t});</span></code></p>
</td>
</tr>
<tr class="row-odd"><td><p>Reation Sort</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">(Set</span> <span class="pre">(Tuple</span> <span class="pre">&lt;Sort_1&gt;,</span> <span class="pre">...,</span> <span class="pre">&lt;Sort_n&gt;))</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Sort</span> <span class="pre">s</span> <span class="pre">=</span> <span class="pre">solver.mkSetSort(cvc5::api::Sort</span> <span class="pre">tupleSort);</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Constants</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">(declare-const</span> <span class="pre">X</span> <span class="pre">(Set</span> <span class="pre">(Tuple</span> <span class="pre">Int</span> <span class="pre">Int)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Sort</span> <span class="pre">s</span> <span class="pre">=</span> <span class="pre">solver.mkSetSort(solver.mkTupleSort({s_int,</span> <span class="pre">s_int});</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">Term</span> <span class="pre">X</span> <span class="pre">=</span> <span class="pre">solver.mkConst(s,</span> <span class="pre">&quot;X&quot;);</span></code></p>
</td>
</tr>
<tr class="row-odd"><td><p>Transpose</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">(transpose</span> <span class="pre">X)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Term</span> <span class="pre">t</span> <span class="pre">=</span> <span class="pre">solver.mkTerm(Kind::TRANSPOSE,</span> <span class="pre">X);</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Transitive Closure</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">(tclosure</span> <span class="pre">X)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Term</span> <span class="pre">t</span> <span class="pre">=</span> <span class="pre">solver.mkTerm(Kind::TCLOSURE,</span> <span class="pre">X);</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Join</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">(join</span> <span class="pre">X</span> <span class="pre">Y)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Term</span> <span class="pre">t</span> <span class="pre">=</span> <span class="pre">solver.mkTerm(Kind::JOIN,</span> <span class="pre">X,</span> <span class="pre">Y);</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Product</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">(product</span> <span class="pre">X</span> <span class="pre">Y)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Term</span> <span class="pre">t</span> <span class="pre">=</span> <span class="pre">solver.mkTerm(Kind::PRODUCT,</span> <span class="pre">X,</span> <span class="pre">Y);</span></code></p></td>
</tr>
</tbody>
</table>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../references.html" class="btn btn-neutral float-right" title="References" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="separation-logic.html" class="btn btn-neutral float-left" title="Theory Reference: Separation Logic" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, the authors of cvc5.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>